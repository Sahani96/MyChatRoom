{"ast":null,"code":"var _jsxFileName = \"D:\\\\myChatRoom\\\\src\\\\components\\\\ChatRoom.js\";\nimport React, { useRef, useState } from \"react\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\n\nfunction ChatRoom(props) {\n  const dummy = useRef();\n  const messagesRef = props.firestore.collection(\"messages\");\n  const query = messagesRef.orderBy(\"createdAt\").limit(25);\n  const [messages] = useCollectionData(query, {\n    idField: \"id\"\n  });\n  const [formValue, setFormValue] = useState(\"\");\n\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = props.auth.currentUser;\n    await messagesRef.add({\n      text: formValue,\n      createdAt: props.firebase.firestore.FieldValue.serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue(\"\");\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }\n  }, messages && messages.map(msg => /*#__PURE__*/React.createElement(ChatMessage, {\n    auth: props.auth,\n    key: msg.id,\n    message: msg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    ref: dummy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: sendMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    value: formValue,\n    onChange: e => setFormValue(e.target.value),\n    placeholder: \"Type a message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    disabled: formValue === \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 9\n    }\n  }, \"Send\")));\n}\n\nexport default ChatRoom;\n\nfunction ChatMessage(props) {\n  const {\n    text,\n    uid,\n    photoURL\n  } = props.message;\n  const messageClass = uid === props.auth.currentUser.uid ? \"sent\" : \"received\";\n  const avatar = photoURL || \"https://api.adorable.io/avatars/23/abott@adorable.png\";\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `message ${messageClass}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: avatar,\n    alt: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }, text));\n}","map":{"version":3,"names":["React","useRef","useState","useCollectionData","ChatRoom","props","dummy","messagesRef","firestore","collection","query","orderBy","limit","messages","idField","formValue","setFormValue","sendMessage","e","preventDefault","uid","photoURL","auth","currentUser","add","text","createdAt","firebase","FieldValue","serverTimestamp","map","msg","id","target","value","ChatMessage","message","messageClass","avatar"],"sources":["D:/myChatRoom/src/components/ChatRoom.js"],"sourcesContent":["import React, { useRef, useState } from \"react\";\r\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\r\n\r\nfunction ChatRoom(props) {\r\n  const dummy = useRef();\r\n  const messagesRef = props.firestore.collection(\"messages\");\r\n  const query = messagesRef.orderBy(\"createdAt\").limit(25);\r\n\r\n  const [messages] = useCollectionData(query, { idField: \"id\" });\r\n  const [formValue, setFormValue] = useState(\"\");\r\n\r\n  const sendMessage = async e => {\r\n    e.preventDefault();\r\n\r\n    const { uid, photoURL } = props.auth.currentUser;\r\n\r\n    await messagesRef.add({\r\n      text: formValue,\r\n      createdAt: props.firebase.firestore.FieldValue.serverTimestamp(),\r\n      uid,\r\n      photoURL\r\n    });\r\n\r\n    setFormValue(\"\");\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <main>\r\n        {messages &&\r\n          messages.map(msg => (\r\n            <ChatMessage auth={props.auth} key={msg.id} message={msg} />\r\n          ))}\r\n        <span ref={dummy}></span>\r\n      </main>\r\n      <form onSubmit={sendMessage}>\r\n        <input\r\n          value={formValue}\r\n          onChange={e => setFormValue(e.target.value)}\r\n          placeholder=\"Type a message\"\r\n        />\r\n        <button type=\"submit\" disabled={formValue === \"\"}>\r\n          Send\r\n        </button>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ChatRoom;\r\n\r\nfunction ChatMessage(props) {\r\n  const { text, uid, photoURL } = props.message;\r\n  const messageClass = uid === props.auth.currentUser.uid ? \"sent\" : \"received\";\r\n  const avatar =\r\n    photoURL || \"https://api.adorable.io/avatars/23/abott@adorable.png\";\r\n\r\n  return (\r\n    <div className={`message ${messageClass}`}>\r\n      <img src={avatar} alt=\"avatar\" />\r\n      <p>{text}</p>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,MAAhB,EAAwBC,QAAxB,QAAwC,OAAxC;AACA,SAASC,iBAAT,QAAkC,gCAAlC;;AAEA,SAASC,QAAT,CAAkBC,KAAlB,EAAyB;EACvB,MAAMC,KAAK,GAAGL,MAAM,EAApB;EACA,MAAMM,WAAW,GAAGF,KAAK,CAACG,SAAN,CAAgBC,UAAhB,CAA2B,UAA3B,CAApB;EACA,MAAMC,KAAK,GAAGH,WAAW,CAACI,OAAZ,CAAoB,WAApB,EAAiCC,KAAjC,CAAuC,EAAvC,CAAd;EAEA,MAAM,CAACC,QAAD,IAAaV,iBAAiB,CAACO,KAAD,EAAQ;IAAEI,OAAO,EAAE;EAAX,CAAR,CAApC;EACA,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4Bd,QAAQ,CAAC,EAAD,CAA1C;;EAEA,MAAMe,WAAW,GAAG,MAAMC,CAAN,IAAW;IAC7BA,CAAC,CAACC,cAAF;IAEA,MAAM;MAAEC,GAAF;MAAOC;IAAP,IAAoBhB,KAAK,CAACiB,IAAN,CAAWC,WAArC;IAEA,MAAMhB,WAAW,CAACiB,GAAZ,CAAgB;MACpBC,IAAI,EAAEV,SADc;MAEpBW,SAAS,EAAErB,KAAK,CAACsB,QAAN,CAAenB,SAAf,CAAyBoB,UAAzB,CAAoCC,eAApC,EAFS;MAGpBT,GAHoB;MAIpBC;IAJoB,CAAhB,CAAN;IAOAL,YAAY,CAAC,EAAD,CAAZ;EACD,CAbD;;EAeA,oBACE,uDACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GACGH,QAAQ,IACPA,QAAQ,CAACiB,GAAT,CAAaC,GAAG,iBACd,oBAAC,WAAD;IAAa,IAAI,EAAE1B,KAAK,CAACiB,IAAzB;IAA+B,GAAG,EAAES,GAAG,CAACC,EAAxC;IAA4C,OAAO,EAAED,GAArD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,CAFJ,eAKE;IAAM,GAAG,EAAEzB,KAAX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EALF,CADF,eAQE;IAAM,QAAQ,EAAEW,WAAhB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IACE,KAAK,EAAEF,SADT;IAEE,QAAQ,EAAEG,CAAC,IAAIF,YAAY,CAACE,CAAC,CAACe,MAAF,CAASC,KAAV,CAF7B;IAGE,WAAW,EAAC,gBAHd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,eAME;IAAQ,IAAI,EAAC,QAAb;IAAsB,QAAQ,EAAEnB,SAAS,KAAK,EAA9C;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,UANF,CARF,CADF;AAqBD;;AAED,eAAeX,QAAf;;AAEA,SAAS+B,WAAT,CAAqB9B,KAArB,EAA4B;EAC1B,MAAM;IAAEoB,IAAF;IAAQL,GAAR;IAAaC;EAAb,IAA0BhB,KAAK,CAAC+B,OAAtC;EACA,MAAMC,YAAY,GAAGjB,GAAG,KAAKf,KAAK,CAACiB,IAAN,CAAWC,WAAX,CAAuBH,GAA/B,GAAqC,MAArC,GAA8C,UAAnE;EACA,MAAMkB,MAAM,GACVjB,QAAQ,IAAI,uDADd;EAGA,oBACE;IAAK,SAAS,EAAG,WAAUgB,YAAa,EAAxC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAK,GAAG,EAAEC,MAAV;IAAkB,GAAG,EAAC,QAAtB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADF,eAEE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAAIb,IAAJ,CAFF,CADF;AAMD"},"metadata":{},"sourceType":"module"}